version: 1

component:
  area: item-players
  # What weâ€™re validating at a high level (not necessarily a literal tag name)
  underTest: "<pie-iife-player|pie-esm-player>"

examplesApp:
  app: "@pie-framework/pie-players-example"
  # Eval harness route (local demo app)
  # player: iife | esm
  # mode: gather | view | evaluate | browse | author
  # role: student | instructor
  # Note: browse mode automatically sets role=instructor and shows correct answers
  routeTemplate: "/evals/item-player/{sampleId}?player={player}&mode={mode}&role={role}"

evals:
  - id: "<item-players>/<sampleId>/<case-name>"
    sampleId: "<sampleId>" # item id (see getExampleById in sample library)
    gradeBand: "K-12" # K-2, 3-6, 6-8, 9-12, K-12
    subject: "general" # math, science, ela, social-studies, general
    severity: "error" # error | warn
    intent: "One sentence: what this validates (player behavior + outcome)."
    notes:
      - "Keep steps unambiguous and grounded in user-visible behavior."
      - "Prefer harness testids over brittle selectors."
      - "Assertion operators: equals, contains, containsAny, containsAll, equalsOrdered, notEqualsOrdered, lengthGte, isNullOrEmpty, gte, exists, valueContains, range, greaterThan, lessThan, notEquals, notContains, in"

    steps:
      - action: navigate
        path: "/evals/item-player/<sampleId>?player=iife&mode=gather&role=student"

      - action: observe
        target:
          testId: player-root

      - action: observe
        target:
          testId: last-event-type
        expect:
          equals: "load-complete"

      # Deterministic event-plumbing checks (preferred over flaky deep UI interactions):
      - action: dispatchEvent
        target:
          testId: player-host
        eventType: "session-changed"
        detail:
          complete: false
          component: "manual"

      - action: observe
        target:
          testId: last-session-changed
        expect:
          contains: "\"component\""

    spiritChecks:
      - "Player loads without confusing intermediate errors or broken layout."
      - "Error states are accessible (role=alert, readable heading, actionable hint)."


