<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Basic Section Player Demo</title>
	<style>
		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
			background: #f5f5f5;
		}

		h1 {
			color: #333;
			margin-bottom: 0.5rem;
		}

		.demo-header {
			margin-bottom: 2rem;
			padding: 1rem;
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		}

		.controls {
			margin-bottom: 2rem;
			padding: 1rem;
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		}

		.controls h2 {
			margin-top: 0;
			font-size: 1.2rem;
			color: #555;
		}

		.button-group {
			display: flex;
			gap: 1rem;
			margin-bottom: 1rem;
		}

		button {
			padding: 0.5rem 1rem;
			background: #007bff;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 0.9rem;
		}

		button:hover {
			background: #0056b3;
		}

		button.secondary {
			background: #6c757d;
		}

		button.secondary:hover {
			background: #545b62;
		}

		.player-container {
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			padding: 1rem;
		}

		.event-log {
			margin-top: 2rem;
			padding: 1rem;
			background: #f9f9f9;
			border: 1px solid #ddd;
			border-radius: 4px;
			max-height: 200px;
			overflow-y: auto;
		}

		.event-log h3 {
			margin-top: 0;
			font-size: 1rem;
			color: #555;
		}

		.event-log pre {
			margin: 0.5rem 0;
			padding: 0.5rem;
			background: white;
			border: 1px solid #e0e0e0;
			border-radius: 2px;
			font-size: 0.85rem;
			overflow-x: auto;
		}
	</style>
</head>
<body>
	<div class="demo-header">
		<h1>ðŸ¥§ PIE Section Player - Basic Demo</h1>
		<p>A simple demonstration of the section player with one passage and three items.</p>
	</div>

	<div class="controls">
		<h2>Controls</h2>
		<div class="button-group">
			<button onclick="loadPageMode()">Page Mode (All Visible)</button>
			<button onclick="loadItemMode()">Item Mode (One at a Time)</button>
			<button class="secondary" onclick="clearLog()">Clear Event Log</button>
		</div>
	</div>

	<div class="player-container">
		<pie-section-player id="player"></pie-section-player>
	</div>

	<div class="event-log">
		<h3>Event Log</h3>
		<div id="log"></div>
	</div>

	<script type="module">
		// Import the web component
		import '../dist/pie-section-player.js';

		const player = document.getElementById('player');
		const log = document.getElementById('log');

		// Event listeners
		player.addEventListener('section-loaded', (e) => {
			addLog('section-loaded', e.detail);
		});

		player.addEventListener('item-changed', (e) => {
			addLog('item-changed', e.detail);
		});

		player.addEventListener('session-changed', (e) => {
			addLog('session-changed', e.detail);
		});

		player.addEventListener('player-error', (e) => {
			addLog('player-error', e.detail);
		});

		function addLog(eventName, detail) {
			const entry = document.createElement('pre');
			entry.textContent = `[${new Date().toLocaleTimeString()}] ${eventName}: ${JSON.stringify(detail, null, 2)}`;
			log.insertBefore(entry, log.firstChild);
		}

		window.clearLog = () => {
			log.innerHTML = '';
		};

		// Sample section data
		const sectionData = {
			identifier: 'item-by-item-section',
			title: 'Reading Comprehension',
			keepTogether: false,

			rubricBlocks: [
				{
					id: 'passage',
					view: 'candidate',
					use: 'passage',
					passage: {
						id: 'passage-solar',
						name: 'The Solar System',
						baseId: 'passage-solar',
						version: { major: 1, minor: 0, patch: 0 },
						config: {
							markup: `<div id="p" class="passage" style="padding: 1.5rem; background: #fafafa; border: 1px solid #e0e0e0; border-radius: 4px; margin-bottom: 1rem;">
								<h2 style="margin-top: 0; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem;">The Solar System</h2>
								<p>Our solar system consists of the Sun and everything that orbits around it, including eight planets, their moons, asteroids, comets, and other celestial objects.</p>
								<p>The Sun, a massive ball of hot gas, contains 99.8% of the solar system's mass and provides the energy that sustains life on Earth. The eight planets orbit the Sun in elliptical paths, with the inner planets (Mercury, Venus, Earth, and Mars) being rocky and terrestrial, while the outer planets (Jupiter, Saturn, Uranus, and Neptune) are gas giants.</p>
								<p>Each planet has unique characteristics that make it special, from Venus's thick atmosphere to Saturn's spectacular rings.</p>
							</div>`,
							elements: {},
							models: []
						}
					}
				}
			],

			assessmentItemRefs: [
				{
					identifier: 'q1',
					required: true,
					item: {
						id: 'item-001',
						name: 'Question 1',
						baseId: 'item-001',
						version: { major: 1, minor: 0, patch: 0 },
						config: {
							markup: `<div id="q1" style="padding: 1rem;">
								<p style="font-size: 1.1rem; margin-bottom: 1rem;"><strong>Question 1:</strong> What is at the center of our solar system?</p>
								<div style="margin-left: 1rem;">
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q1" value="sun" style="margin-right: 0.5rem;">
										A) The Sun
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q1" value="earth" style="margin-right: 0.5rem;">
										B) The Earth
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q1" value="moon" style="margin-right: 0.5rem;">
										C) The Moon
									</label>
								</div>
							</div>`,
							elements: {},
							models: []
						}
					}
				},
				{
					identifier: 'q2',
					required: true,
					item: {
						id: 'item-002',
						name: 'Question 2',
						baseId: 'item-002',
						version: { major: 1, minor: 0, patch: 0 },
						config: {
							markup: `<div id="q2" style="padding: 1rem;">
								<p style="font-size: 1.1rem; margin-bottom: 1rem;"><strong>Question 2:</strong> How many planets orbit the Sun?</p>
								<div style="margin-left: 1rem;">
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q2" value="seven" style="margin-right: 0.5rem;">
										A) Seven
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q2" value="eight" style="margin-right: 0.5rem;">
										B) Eight
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q2" value="nine" style="margin-right: 0.5rem;">
										C) Nine
									</label>
								</div>
							</div>`,
							elements: {},
							models: []
						}
					}
				},
				{
					identifier: 'q3',
					required: true,
					item: {
						id: 'item-003',
						name: 'Question 3',
						baseId: 'item-003',
						version: { major: 1, minor: 0, patch: 0 },
						config: {
							markup: `<div id="q3" style="padding: 1rem;">
								<p style="font-size: 1.1rem; margin-bottom: 1rem;"><strong>Question 3:</strong> What percentage of the solar system's mass does the Sun contain?</p>
								<div style="margin-left: 1rem;">
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q3" value="a" style="margin-right: 0.5rem;">
										A) 50%
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q3" value="b" style="margin-right: 0.5rem;">
										B) 99.8%
									</label>
									<label style="display: block; margin: 0.5rem 0; cursor: pointer;">
										<input type="radio" name="q3" value="c" style="margin-right: 0.5rem;">
										C) 75%
									</label>
								</div>
							</div>`,
							elements: {},
							models: []
						}
					}
				}
			]
		};

		window.loadPageMode = () => {
			player.section = {
				...sectionData,
				keepTogether: true
			};
			player.mode = 'gather';
			player.view = 'candidate';
		};

		window.loadItemMode = () => {
			player.section = {
				...sectionData,
				keepTogether: false
			};
			player.mode = 'gather';
			player.view = 'candidate';
		};

		// Load item mode by default
		loadItemMode();
	</script>
</body>
</html>
